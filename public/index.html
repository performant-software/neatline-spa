<!DOCTYPE html>
<html lang="en">

<head>
	<title>Neatline 3</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="theme-color" content="#000000">

	<link rel="manifest" href="%PUBLIC_URL%/manifest.json">
	<link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico">

	<link href="%PUBLIC_URL%/main.css" rel="stylesheet">

	<!-- Shim for JWT when this is called standalone -->
	<script>
		window.baseRoute="";

		// Retrieve jwt from GET param
		jwt = getParameterByName('jwt');

		// If not what we expect, get it from localstore
		if(typeof jwt === 'undefined' || jwt === 'null' || jwt == null || jwt.length == 0){
			jwt = localStorage.getItem('jwt');
		}

		// If still not what we expect, complain
		if(typeof jwt === 'undefined' || jwt === 'null' || jwt == null || jwt.length == 0){
			alert("Please provide a valid JWT as a GET param, /index.html?jwt=...");

		// We're good
		}else{
			localStorage.setItem('jwt', jwt);
			window.jwt = jwt;
			console.warn("Using JWT: "+jwt+"\nIf page is empty or otherwise unexpected, JWT is likely bad/stale, check and set again: ?jwt=");
		}

		// Helper: parse GET params
		function getParameterByName(name, url) {
			if (!url) url = window.location.href;
			name = name.replace(/[\[\]]/g, "\\$&");
			var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
				results = regex.exec(url);
			if (!results) return null;
			if (!results[2]) return '';
			return decodeURIComponent(results[2].replace(/\+/g, " "));
		}
	</script>
</head>

<body>
	<noscript>You need to enable JavaScript to run this app.</noscript>
	<div id="content" role="main">
		<div id="root"></div>
	</div>
</body>

</html>
